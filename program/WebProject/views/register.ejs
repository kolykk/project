<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <link rel="icon" type="image/png" href="assets2/assets/paper_img/favicon.png">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />

  <title>Sensor System</title>


  <link href="assets2/bootstrap3/css/bootstrap.css" rel="stylesheet" />
  <link href="assets2/assets/css/ct-paper.css" rel="stylesheet"/>
  <link href="assets2/assets/css/demo.css" rel="stylesheet" />
  <link href="assets2/assets/css/bootstrap-clockpicker.min.css" rel="stylesheet" />




  <!--     Fonts and icons     -->
  <link href="http://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
  <link href='http://fonts.googleapis.com/css?family=Montserrat' rel='stylesheet' type='text/css'>
  <link href='http://fonts.googleapis.com/css?family=Open+Sans:400,300' rel='stylesheet' type='text/css'>
  <!-- <link rel="stylesheet" type="text/css" href="semantic/dist/semantic.min.css">-->


  <script src="https://google-code-prettify.googlecode.com/svn/loader/run_prettify.js"></script>

  <!-- modal-->

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>

  

  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <link type="text/css" href="assets2/bootstrap3/css/bootstrap.min.css" />
  <link type="text/css" href="assets2/bootstrap3/css/bootstrap-timepicker.min.css" />
  <script type="text/javascript" src="js/jquery.min.js"></script>
  <script type="text/javascript" src="js/bootstrap.min.js"></script>



</head>
<nav class="navbar navbar-ct-danger" role="navigation-demo" id="demo-navbar">
  <div class="container">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navigation-example-2">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <h3><strong>SENSOR SYSTEM</strong></h3>

    </div>

    <!-- Collect the nav links, forms, and other content for toggling -->
    <div class="collapse navbar-collapse" id="navigation-example-2">
      <ul class="nav navbar-nav navbar-right">
        <li>
          <a href="/" class="btn btn-success btn-simple">HOME</a>
        </li>

        <li>
          <a href="/login" class="btn btn-success ">LOGOUT</a>
        </li>
      </ul>
    </div><!-- /.navbar-collapse -->
  </div><!-- /.container-->
</nav>         

<div class="wrapper">   </div>     
<div class="main">
  <div class="section section-nude">
    <div class="container">
      <div class="row">
        <div class="col-md-3">
          <div class="fixed-section">
            <ul>

             <a href="/register">
               <div class="col-sm-3 block-3-box wow fadeInDown animated" style="visibility: visible; animation-name: fadeInDown;">
                <br><br> <div class="block-3-box-icon">
                <button class="btn btn-primary  btn-lg"><i class="fa fa-pencil" ></i>Registration</button>
              </a>
              <br><br> <a href="/manageinfo"> 
              <button class="btn btn-primary  btn-lg"><i class="fa fa-list-alt" ></i>Informations</button></a> 
              <br><br><a href="/transactions"> 
              <button class="btn btn-primary  btn-lg"><i class="glyphicon glyphicon-transfer" ></i>Transactions</button></a>
              
            </ul>
          </div>
        </div>
        <div class="col-md-6 col-md-offset-1">
          <div class="tim-container" style="min-height: 700px;">

            <form action='/register/insert' method="POST" name="">

              <!-- buttons row -->
              <div class="tim-row" id="buttons-row">


                <h3><i class="fa fa-pencil-square-o" aria-hidden="true"></i> &nbsp SENSOR FORM</h3>

                <legend></legend>


                <div class="row">
                  <div class="col-sm-2" style="padding-top: 10px">
                    NAME :
                  </div>


                  <div class="col-sm-9">
                   <div class="input-group">
                    <input style="background-color: #e6e6e6" type="text" value="" class="form-control" name='s_name' id='s_name'>
                    <span style="background-color:

                    #f2f2f2" class="input-group-addon"><i class="fa fa-rss"></i></span>
                  </div> 
                </div>
                <div class="col-sm-1">
                  <i id="a_name" class="glyphicon glyphicon-exclamation-sign" data-toggle="tooltip" data-placement="top" title="Please fill out this field" style="color:red;padding-top: 10px"></i>

                </div>
              </div>

              <br> 
              <div class="row">
                <div class="col-sm-2" style="padding-top: 10px">
                 TYPE :
               </div>


               <div class="col-sm-10">
                 <div class="input-group">
                  <label class="checkbox checkbox-orange" for="checkbox3">
                    <input type="checkbox" value="temperature" id="checkbox3" data-toggle="checkbox" checked name='typet'>                     TEMPERATURE
                  </label>
                  <label class="checkbox checkbox-azure" for="checkbox2">
                    <input type="checkbox" value="humidity" id="checkbox2" data-toggle="checkbox" checked name='typeh'>                     RELATIVE HUMIDITY 
                  </label>
                </div> 
              </div>


            </div>

            <!-- end row -->
            <!--Location-->
            <br> 
            <div class="row">
              <div class="col-sm-3" style="padding-top: 10px">
               LOCATION :
             </div>


             <div class="col-sm-8" >


              <select id="mySelect" class="selectpicker" name="s_location" data-width="auto" id="s_location">

               <option value='' selected="selected">SELECT ONE..&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;</option>

               <option value='Building A'>Building A&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&nbsp</option>
               <option value='Building B'>Building B&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&nbsp</option>
             </select>

           </div>
           <div class="col-sm-1">
                  <i id="a_location" class="glyphicon glyphicon-exclamation-sign" data-toggle="tooltip" data-placement="top" title="Please fill out this field" style="color:red;padding-top: 10px"></i>

                </div>

         </div>


         <!-- establish date -->
         <br> 
         <div class="row">
          <div class="col-sm-4" style="padding-top: 10px">

           ESTABLISH DATE :
         </div>


         <div class="col-sm-7">
          <div class="input-group" >
            <input class="datepicker form-control" style="background-color:#e6e6e6 " id='s_established' type="text" name='s_established'/> 
            <span style="background-color:

            #f2f2f2" class="input-group-addon"><i class="fa fa-calendar"></i></span>   
          </div>
        </div>

            <div class="col-sm-1">
                  <i id="a_established" class="glyphicon glyphicon-exclamation-sign" data-toggle="tooltip" data-placement="top" title="Please fill out this field" style="color:red;padding-top: 10px"></i>

                </div>
      </div>



      <!-- Duration -->
      <br>
      <div id='result'>
        <div id='detail1'> 
          <nav class="navbar navbar-block navbar-ct-warning" style="cursor: default;text-align: center;" >DETAIL 1</nav><hr>
          <div class="row">
            <div class="col-sm-4" style="padding-top: 10px">

              DURATION : 
            </div>



            <div class="col-sm-2" style="padding-top: 10px">
              START
            </div>
            <div class="col-sm-5">
             <div class="input-group clockpicker" data-placement="right" data-align="top" data-autoclose="true">
              <input type="text" class="form-control" style="background-color:#e6e6e6" name='start_time' id='start_time'>
              <span class="input-group-addon">
                <span class="glyphicon glyphicon-time"></span>
              </span>
            </div>
          </div>
             <div class="col-sm-1">
                  <i id="a_start" class="glyphicon glyphicon-exclamation-sign" data-toggle="tooltip" data-placement="top" title="Please fill out this field" style="color:red;padding-top: 10px"></i>

                </div>
        </div>
        <!-- -->
        <div class="row" style="padding-top: 1px">
          <div class="col-sm-4">    </div>

          <div class="col-sm-2" style="padding-top: 10px">
            FINISH
          </div>
          <div class="col-sm-5">
            <div class="input-group clockpicker" data-placement="right" data-align="top" data-autoclose="true">
              <input type="text" class="form-control" style="background-color:#e6e6e6" name='finish_time' id='finish_time'>
              <span class="input-group-addon">
                <span class="glyphicon glyphicon-time"></span>
              </span>
            </div>
          </div>
             <div class="col-sm-1">
                  <i id="a_finish" class="glyphicon glyphicon-exclamation-sign" data-toggle="tooltip" data-placement="top" title="Please fill out this field" style="color:red;padding-top: 10px"></i>

                </div>
        </div>

        <!-- end duration -->



        <!-- temperature control-->

        <br>
        <div class="row">
          <div class="col-sm-4">
           TEMPERATURE CONTROL :
         </div>
         <div class="col-sm-7">

           <div class="input-group">

             <input style="background-color: #e6e6e6" type="text" value="" class="form-control" id='control_temp' name='control_temp'>
             <span style="background-color:

             #f2f2f2" class="input-group-addon"><i class="glyphicon glyphicon-fire"></i></span>

           </div> 
         </div>
            <div class="col-sm-1">
                  <i id="a_controltemp" class="glyphicon glyphicon-exclamation-sign" data-toggle="tooltip" data-placement="top" title="Please fill out this field" style="color:red;padding-top: 10px"></i>

                </div>
       </div>


       <!-- temperature control description-->

       <div class="row">
         <div class="col-sm-4"></div>

         <div class="col-sm-8" >

          <font color="#e0e0eb">Example. 20 Mean 18-22 (&#176 C)</font>

        </div>
      </div>


      <!--end temperature -->

      <br>
      <div class="row">
        <div class="col-sm-4">
         RELATIVE HUMIDITY CONTROL :
       </div>
       <div class="col-sm-7">

         <div class="input-group">

           <input style="background-color: #e6e6e6" type="text" value="" class="form-control" name='control_humid' id='control_humid'>
           <span style="background-color:

           #f2f2f2" class="input-group-addon">
           <i class="glyphicon glyphicon-leaf"></i></span>   
         </div>
       </div>
          <div class="col-sm-1">
                  <i id="a_controlhumid" class="glyphicon glyphicon-exclamation-sign" data-toggle="tooltip" data-placement="top" title="Please fill out this field" style="color:red;padding-top: 10px"></i>

                </div>
     </div>





     <!-- humidity control description-->

     <div class="row">
       <div class="col-sm-4"></div>

       <div class="col-sm-8" >

        <font color="#e0e0eb">Example. 60 (%) ratio of vapor to the equilibrium per vapor in the air. </font>

      </div>
    </div>

  </div>
  <hr>

</div> <!-- n open div-->

<!-- end relative humidity -->
<br>
<input id="creNewDetail" type='button' class="form-control" value="ADD DETAILS" >



<!-- description -->
<br> 
<div class="row">
  <div class="col-sm-4" style="padding-top: 10px">

   DESCRIPTION :
 </div>



 <div class="col-sm-8">
  <textarea style="background-color:#e6e6e6"  class="form-control" placeholder="typing your explain.." rows="3" name="s_descriptions" id="s_descriptions"></textarea>

</div>
</div>

<div class="tim-row">
  <center>  
    <button type="button" class="btn btn-success btn-lg" data-toggle="modal" data-target="#myModal" onclick="testFillAlert()">&nbsp SAVE &nbsp</button>

    <input type="reset" class="btn btn-warning btn-lg" value="CANCEL">
  </center>


  <!-- modal -->
  <div class="container">



    <!-- Modal -->
    <div class="modal fade" id="myModal" role="dialog">
      <div class="modal-dialog modal-sm">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal">&times;</button>
            <h4 class="modal-title">Save Information</h4>
          </div>
          <div class="modal-body">
            <center><font>Are you sure ?</font></center>
          </div> 
          <div class="modal-footer" ><br>
           <center>&nbsp<i class="fa fa-check" aria-hidden="true" onclick="testInsert()"  style="cursor: pointer;"></i></button>
            <!-- <button type="submit" class="btn btn-default">  <i class="fa fa-check" aria-hidden="true"></i></button> -->

            <i class="fa fa-times" aria-hidden="true" data-dismiss="modal"  style="cursor: pointer;"></i></button></center><br>
          </div>
        </div>
      </div>
    </div>
  </div>

</div>

</form>
</div>

<!-- end row -->

<!-- end container -->


</div>
</div>
</div>
</div>
</div>



<footer class="footer-demo section-dark">
  <div class="container">
    <nav class="pull-left">

    </nav>
    <div class="copyright pull-right">
      &copy; 2017, made with <i class="fa fa-heart heart"></i> 
    </div>
  </div>
</footer>
</body>




<script src="assets2/assets/js/jquery-1.10.2.js" type="text/javascript"></script>
<script src="assets2/assets/js/jquery-ui-1.10.4.custom.min.js" type="text/javascript"></script>

<script src="assets2/bootstrap3/js/bootstrap.js" type="text/javascript"></script>

<!--  Plugins -->
<script src="assets2/assets/js/ct-paper-checkbox.js"></script>
<script src="assets2/assets/js/ct-paper-radio.js"></script>
<script src="assets2/assets/js/bootstrap-select.js"></script>
<script src="assets2/assets/js/bootstrap-datepicker.js"></script>

<script src="assets2/assets/js/ct-paper.js"></script>

<script src="assets2/assets/js/bootstrap-clockpicker.min.js"></script>




<script>

// $(document).ready(function(){
//   if($('#s_name').val().length == 0){
//     $('#a_name').show();
//   }

// });

// Alert Tooltip
$('#a_name').tooltip();
$('#a_established').tooltip();
$('#a_controlhumid').tooltip();
$('#a_controltemp').tooltip();
$('#a_start').tooltip();
$('#a_finish').tooltip();


  $('#mySelect').change(function(){
    if($('#mySelect').val() == ''){
      $('#a_location').show();
    }
    else{
      $('#a_location').hide();
    }
  });
  $('#s_name').keyup(function(){
    if($('#s_name').val().length != 0){
      $('#a_name').hide()
    }
    else{
      $('#a_name').show()
    }
  });


  $(document).mousemove(function(){
    if($('#s_established').val().length != 0){
      $('#a_established').hide()
    }
    else{
      $('#a_established').show()
    }
    });


 $(document).mousemove(function(){
    if($('#start_time').val().length != 0){
      $('#a_start').hide()
    }
    else{
      $('#a_start').show()
    }
    });


 $(document).mousemove(function(){
    if($('#finish_time').val().length != 0){
      $('#a_finish').hide()
    }
    else{
      $('#a_finish').show()
    }
    });

  $('#control_humid').keyup(function(){
    if($('#control_humid').val().length != 0){
      $('#a_controlhumid').hide()
    }
    else{
      $('#a_controlhumid').show()
    }
  });

    $('#control_temp').keyup(function(){
    if($('#control_temp').val().length != 0){
      $('#a_controltemp').hide()
    }
    else{
      $('#a_controltemp').show()
    }
  });




// End Alert Tooltip


  var i = 2;
  $('#creNewDetail').click(function(){
    console.log(i);

    var scntDiv = $('#result');



    $('<div id="detail'+i+'">').appendTo(scntDiv);

    $('#detail'+i).load('/creNewDetail');


    $('#detail'+i).before('<nav class="navbar navbar-block navbar-ct-warning" style="cursor: default;text-align: center;" >DETAIL'  +" "+ i+'</nav><hr>');
    i++;


        // $('#remScnt').click(function() { 
        //         if( i > 2 ) {
        //                 $(this).parents().remove();
        //                 i--;
        //         }
        //         return false;
        // });


        
      });


function generateUUID() {
    var d = new Date().getTime();
    var uuid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {
        var r = (d + Math.random()*16)%16 | 0;
        d = Math.floor(d/16);
        return (c=='x' ? r : (r&0x3|0x8)).toString(16);
    });
    return uuid;
};


  function testInsert(){

  // document.getElementById('result');
  var uuid = generateUUID();
  s_name=($('#s_name').val());
  s_established=($('#s_established').val());
  s_location=($('#mySelect').val());
  s_descriptions=($('#s_descriptions').val());
  var n = $("#result > div").length;


  for(var i=1;i<=n;i++){
    start_time=($('#detail'+i+' > div').find('#start_time').val());
    finish_time=($('#detail'+i+' > div').find('#finish_time').val());
    control_temp=($('#detail'+i+' > div').find('#control_temp').val());
    control_humid=($('#detail'+i+' > div').find('#control_humid').val());

    if(start_time == '' || finish_time == '' || control_humid == '' || control_temp == ''){
      console.log('no detail');
    }
    else{
    $.post( "/register/insert", { s_id: uuid ,s_name: s_name, s_established: s_established, s_location: s_location, s_descriptions: s_descriptions, start_time:start_time, finish_time: finish_time, control_temp: control_temp, control_humid: control_humid } );
    }

  }
//alert("Insert Success!!!  :)")
$('#myModal').modal("hide");

window.location.replace("/manageinfo");
}

$('#reset').click(function(){
  $('#mySelect').get(0).selectedIndex = 0;
});


</script>
<script>
  $('.clockpicker').clockpicker({

  });

  $('.datepicker').datepicker({

    weekStart:1,

    color:'orange'

  });
</script>
</html>